<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>DLx Data Download API &middot; resol-vbus Documentation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="styles/bootstrap.css">

    <link rel="stylesheet" href="styles/font-awesome/css/font-awesome.css">

    <!-- syntax highlighting CSS -->
    <link rel="stylesheet" href="styles/syntax.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles/main.css">

  </head>
  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-inverse-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="index.html">resol-vbus</a>
        </div>
        <div class="navbar-collapse collapse navbar-inverse-collapse">
          <ul class="nav navbar-nav">
            <li><a href="index.html">About</a></li>
            <li><a href="tutorials.html">Tutorials</a></li>
            <li><a href="docs.html">Documentation</a></li>
            <li><a href="examples.html">Examples</a></li>
            <li><a href="support.html">Support</a></li>
  <!--
            <li class="active"><a href="#">Active</a></li>
            <li><a href="#">Link</a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="#">Action</a></li>
                <li><a href="#">Another action</a></li>
                <li><a href="#">Something else here</a></li>
                <li class="divider"></li>
                <li class="dropdown-header">Dropdown header</li>
                <li><a href="#">Separated link</a></li>
                <li><a href="#">One more separated link</a></li>
              </ul>
            </li>
  -->
          </ul>
  <!--
          <form class="navbar-form navbar-left">
            <input type="text" class="form-control col-lg-8" placeholder="Search">
          </form>
  -->
          <ul class="nav navbar-nav navbar-right">
  <!--
            <li><a href="#">Link</a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="#">Action</a></li>
                <li><a href="#">Another action</a></li>
                <li><a href="#">Something else here</a></li>
                <li class="divider"></li>
                <li><a href="#">Separated link</a></li>
              </ul>
            </li>
  -->
          </ul>
        </div><!-- /.nav-collapse -->
      </div><!-- /.container -->
    </div><!-- /.navbar -->

    <div class="container">
  <div class="row">
    <div class="col-sm-3 doc-sidebar">
      <div class="well">
        <h4>General</h4>
        <ul>
          <li><a href="docs.html">Overview</a></li>
          <li><a href="getting-started.html">Getting Started</a></li>
        </ul>
        <h4>Models</h4>
        <ul>
          <li><a href="header-class.html">vbus.Header</a></li>
          <li><a href="packet-class.html">vbus.Packet</a></li>
          <li><a href="datagram-class.html">vbus.Datagram</a></li>
          <li><a href="telegram-class.html">vbus.Telegram</a></li>
          <li><a href="header-set-class.html">vbus.HeaderSet</a></li>
          <li><a href="header-set-consolidator-class.html">vbus.HeaderSetConsolidator</a></li>
        </ul>
        <h4>Connections</h4>
        <ul>
          <li><a href="connection-class.html">vbus.Connection</a></li>
          <li><a href="serial-connection-class.html">vbus.SerialConnection</a></li>
          <li><a href="tcp-connection-class.html">vbus.TcpConnection</a></li>
        </ul>
        <h4>Converters</h4>
        <ul>
          <li><a href="converter-class.html">vbus.Converter</a></li>
          <li><a href="vbus-recording-converter-class.html">vbus.VBusRecordingConverter</a></li>
          <li><a href="dlx-json-converter-class.html">vbus.DLxJsonConverter</a></li>
          <li><a href="text-converter-class.html">vbus.TextConverter</a></li>
        </ul>
        <h4>Recorders</h4>
        <ul>
          <li><a href="recorder-class.html">vbus.Recorder</a></li>
          <li><a href="filesystem-recorder-class.html">vbus.FileSystemRecorder</a></li>
          <li><a href="dlx-recorder-class.html">vbus.DLxRecorder</a></li>
        </ul>
        <h4>Customizer</h4>
        <ul>
          <li><a href="customizer-class.html">vbus.Customizer</a></li>
          <li><a href="connection-customizer-class.html">vbus.ConnectionCustomizer</a></li>
        </ul>
        <h4>DataSource</h4>
        <ul>
          <li><a href="data-source-class.html">vbus.DataSource</a></li>
          <li><a href="serial-data-source-class.html">vbus.SerialDataSource</a></li>
          <li><a href="tcp-data-source-class.html">vbus.TcpDataSource</a></li>
        </ul>
        <h4>DataSourceProvider</h4>
        <ul>
          <li><a href="data-source-provider-class.html">vbus.DataSourceProvider</a></li>
          <li><a href="serial-data-source-provider-class.html">vbus.SerialDataSourceProvider</a></li>
          <li><a href="tcp-data-source-provider-class.html">vbus.TcpDataSourceProvider</a></li>
        </ul>
        <h4>Technical Specifications</h4>
        <ul>
          <li><a href="vbus-specification.html">RESOL VBus Specification</a></li>
          <li><a href="vbus-packets.html">RESOL VBus Packet List</a></li>
          <li><a href="vbus-recording-file-format.html">VBus Recording File Format</a></li>
          <li><a href="vbus-specification-file-format-v1.html">VBus Spec. File Format v1</a></li>
          <li><a href="vbus-over-tcp.html">VBus Over TCP</a></li>
          <li><a href="dlx-data-download-api.html">DLx Data Download API</a></li>
        </ul>
      </div>
    </div>
    <div class="col-sm-9 doc-main">
      <h1>DLx Data Download API</h1>
      <p>This document describes the API that can be used to download data from a RESOL DataLogger.</p>

<h4 id="supported-devices">Supported Devices</h4>

<ul>
  <li>RESOL Datalogger DL2 (version 2.0 or higher)</li>
  <li>RESOL Datalogger DL3 (version 2.0 or higher)</li>
</ul>

<h4 id="common-parameters">Common parameters</h4>

<ul>
  <li><strong>sessionAuthUsername</strong>: user name for web interface access.</li>
  <li><strong>sessionAuthPassword</strong>: password for web interface access.</li>
</ul>

<h2 id="get-live-data-as-json">Get live data as JSON</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET /dlx/download/live
</code></pre></div></div>

<h4 id="parameters">Parameters</h4>

<ul>
  <li><strong>channel</strong> (optional): only include data from given channel.</li>
  <li><strong>filter</strong> (optional): the ID of the filter to apply on the data.</li>
  <li><strong>view</strong> (optional): the ID of the view to apply on the data.</li>
</ul>

<h4 id="example">Example</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl "http://$HOST/dlx/download/live?sessionAuthUsername=admin&amp;sessionAuthPassword=admin"
</code></pre></div></div>

<h4 id="success-response">Success Response</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP/1.1 200 OK
Content-Type: application/json

{
    "language": "de",
    "headers": [{
        "id": "00_0010_0053_0100",
        "description": "VBus 0: DL3",
        "channel": 0,
        "destination_address": 16,
        "source_address": 83,
        "protocol_version": 16,
        "command": 256,
        "info": 0,
        "destination_name": "DFA",
        "source_name": "DL3",
        "fields": [{
            "id": "000_4_0",
            "name": "Resistor Sensor 1",
            "unit": " Ohm",
            "unit_code": "Ohms"
        }, {
            "id": "004_4_0",
            "name": "Resistor Sensor 2",
            "unit": " Ohm",
            "unit_code": "Ohms"
        }, {
            "id": "008_4_0",
            "name": "Resistor Sensor 3",
            "unit": " Ohm",
            "unit_code": "Ohms"
        }, {
            "id": "012_4_0",
            "name": "Current Sensor 4",
            "unit": " mA",
            "unit_code": "Milliamperes"
        }, {
            "id": "034_2_0",
            "name": "Temperature Sensor 1",
            "unit": " \u00B0C",
            "unit_code": "DegreesCelsius"
        }, {
            "id": "036_2_0",
            "name": "Temperature Sensor 2",
            "unit": " \u00B0C",
            "unit_code": "DegreesCelsius"
        }, {
            "id": "038_2_0",
            "name": "Temperature Sensor 3",
            "unit": " \u00B0C",
            "unit_code": "DegreesCelsius"
        }]
    }],
    "headerset_stats": {
        "headerset_count": 1,
        "min_timestamp": 1385490534.720000,
        "max_timestamp": 1385490534.720000
    },
    "headersets": [{
        "timestamp": 1385490534.720000,
        "packets": [{
            "header_index": 0,
            "timestamp": 1385490534.606000,
            "field_values": [{
                "field_index": 0,
                "raw_value": 994.973000,
                "value": "994.973"
            }, {
                "field_index": 1,
                "raw_value": 1072.768000,
                "value": "1072.768"
            }, {
                "field_index": 2,
                "raw_value": 1078.975000,
                "value": "1078.975"
            }, {
                "field_index": 3,
                "raw_value": 3.990000,
                "value": "3.990"
            }, {
                "field_index": 4,
                "raw_value": -1.200000,
                "value": "-1.2"
            }, {
                "field_index": 5,
                "raw_value": 18.600000,
                "value": "18.6"
            }, {
                "field_index": 6,
                "raw_value": 20.200000,
                "value": "20.2"
            }]
        }]
    }]
}
</code></pre></div></div>

<h4 id="failure-responses-http-status-code-500">Failure responses (HTTP status code 500)</h4>

<ul>
  <li><strong>InvalidFilterID</strong>: the value of the <code class="highlighter-rouge">filter</code> parameter was invalid.</li>
  <li><strong>InvalidViewID</strong>: the value of the <code class="highlighter-rouge">view</code> parameter was invalid.</li>
</ul>

<h2 id="download-data">Download data</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET /dlx/download/download
</code></pre></div></div>

<h4 id="parameters-1">Parameters</h4>

<ul>
  <li><strong>source</strong> (default <code class="highlighter-rouge">log</code>): source of the data (can be <code class="highlighter-rouge">log</code> for recorded data or <code class="highlighter-rouge">current</code> for live data).</li>
  <li><strong>inputType</strong> (default <code class="highlighter-rouge">packets</code>): type of data to read from the source (can be <code class="highlighter-rouge">packets</code> for VBus v1 packets).</li>
  <li><strong>outputType</strong> (default <code class="highlighter-rouge">text-tab-crlf</code>): output file format of the download. Can be:
    <ul>
      <li><strong>text-tab-crlf</strong>: Tab separated text file with CR+LF line endings (Windows).</li>
      <li><strong>text-tab-lf</strong>: Tab separated text file with LF line endings (Linux / OSX).</li>
      <li><strong>text-csv-crlf</strong>: Semicolon separated text file with CR+LF line endings (Windows).</li>
      <li><strong>text-csv-lf</strong>: Semicolon separated text file with LF line endings (Linux / OSX).</li>
      <li><strong>json</strong>: JSON encoded text file.</li>
      <li><strong>vbus</strong>: Binary file conforming to VBus Recording File Format.</li>
    </ul>
  </li>
  <li><strong>sieveInterval</strong> (optional): allows filtering the data to be downloaded by specifying an interval in seconds that should be kept between two data records. For example: the DL2 could be configured to store data every 10 seconds, but you can download a file only containing hourly records by specifying <code class="highlighter-rouge">3600</code> here.</li>
  <li><strong>ttl</strong> (optional): time-to-live in seconds. Records that have not been refreshed in this time are no longer included in the output.</li>
  <li><strong>startDate</strong> (optional): start date in <code class="highlighter-rouge">MM/DD/YYYY</code> format.</li>
  <li><strong>endDate</strong> (optional): end date in <code class="highlighter-rouge">MM/DD/YYYY</code> format.</li>
  <li><strong>dataLanguage</strong> (optional): language code (ISO 639-1) to use for the text conversion.</li>
  <li><strong>filter</strong> (optional): the ID of the filter to apply on the data.</li>
</ul>

<h4 id="example-1">Example</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl "http://$HOST/dlx/download/live?sessionAuthUsername=admin&amp;sessionAuthPassword=admin&amp;outputType=json&amp;source=current"
</code></pre></div></div>

<h4 id="sucess-response">Sucess Response</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP/1.1 200 OK
Content-Type: application/json

{
    "language": "de",
    "headers": [{
        "id": "00_0010_0053_0100",
        "description": "VBus 0: DL3",
        "channel": 0,
        "destination_address": 16,
        "source_address": 83,
        "protocol_version": 16,
        "command": 256,
        "info": 0,
        "destination_name": "DFA",
        "source_name": "DL3",
        "fields": [{
            "id": "000_4_0",
            "name": "Resistor Sensor 1",
            "unit": " Ohm",
            "unit_code": "Ohms"
        }, {
            "id": "004_4_0",
            "name": "Resistor Sensor 2",
            "unit": " Ohm",
            "unit_code": "Ohms"
        }, {
            "id": "008_4_0",
            "name": "Resistor Sensor 3",
            "unit": " Ohm",
            "unit_code": "Ohms"
        }, {
            "id": "012_4_0",
            "name": "Current Sensor 4",
            "unit": " mA",
            "unit_code": "Milliamperes"
        }, {
            "id": "034_2_0",
            "name": "Temperature Sensor 1",
            "unit": " \u00B0C",
            "unit_code": "DegreesCelsius"
        }, {
            "id": "036_2_0",
            "name": "Temperature Sensor 2",
            "unit": " \u00B0C",
            "unit_code": "DegreesCelsius"
        }, {
            "id": "038_2_0",
            "name": "Temperature Sensor 3",
            "unit": " \u00B0C",
            "unit_code": "DegreesCelsius"
        }]
    }],
    "headerset_stats": {
        "headerset_count": 1,
        "min_timestamp": 1385490534.720000,
        "max_timestamp": 1385490534.720000
    },
    "headersets": [{
        "timestamp": 1385490534.720000,
        "packets": [{
            "header_index": 0,
            "timestamp": 1385490534.606000,
            "field_values": [{
                "field_index": 0,
                "raw_value": 994.973000,
                "value": "994.973"
            }, {
                "field_index": 1,
                "raw_value": 1072.768000,
                "value": "1072.768"
            }, {
                "field_index": 2,
                "raw_value": 1078.975000,
                "value": "1078.975"
            }, {
                "field_index": 3,
                "raw_value": 3.990000,
                "value": "3.990"
            }, {
                "field_index": 4,
                "raw_value": -1.200000,
                "value": "-1.2"
            }, {
                "field_index": 5,
                "raw_value": 18.600000,
                "value": "18.6"
            }, {
                "field_index": 6,
                "raw_value": 20.200000,
                "value": "20.2"
            }]
        }]
    }]
}
</code></pre></div></div>

<h4 id="failure-responses-http-status-code-500-1">Failure responses (HTTP status code 500)</h4>

<ul>
  <li><strong>InvalidFilterID</strong>: the value of the <code class="highlighter-rouge">filter</code> parameter was invalid.</li>
</ul>


    </div>
  </div>
</div>


    <div id="footer">
      <div class="container">
        <p class="text-muted">
          <a href="https://github.com/danielwippermann/resol-vbus"><i class="fa fa-github"></i> GitHub</a>
        </p>
      </div>
    </div>

    <script src="scripts/jquery.js"></script>
    <script src="scripts/lodash.js"></script>
    <script src="scripts/bootstrap.js"></script>
  </body>
</html>
